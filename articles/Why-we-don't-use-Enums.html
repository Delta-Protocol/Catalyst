<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>1) They're not considered type safe. | Catalyst Framework Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="1) They're not considered type safe. | Catalyst Framework Documentation ">
    <meta name="generator" content="docfx 2.46.0.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../">
    
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../images/logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">

<p>We don&#39;t use Enums in this codebase here are a few reasons why</p>
<h2 id="1-theyre-not-considered-type-safe">1) They&#39;re not considered type safe.</h2>
<p>Taken from the blog article <a href="https://www.planetgeek.ch/2009/07/01/enums-are-evil">Enums Are Evil</a></p>
<blockquote><p>If you think enum’s are type safe, you will get into deep trouble. Look at the example code below. The enum that we have defined is 1, 2 and 3. Right?
Now try to call</p>
</blockquote>
<pre><code>new EnumTricks.IsVolumeHigh((Volume)27);
</code></pre><blockquote><p>That should fail, at least at runtime. It didn’t? That’s really strange… The wrong call will not be detected during compilation nor during runtime. You feel yourself in a false safety.</p>
</blockquote>
<pre><code>public enum Volume
{
  Low = 1,
  Medium,
  High
}

public class EnumTricks
{

  public bool IsVolumeHigh(Volume volume)
  {
    var result = false;

    switch (volume)
    {
      case Volume.Low:
        Console.WriteLine(&quot;Volume is low.&quot;);
        break;

      case Volume.Medium:
        Console.WriteLine(&quot;Volume is medium.&quot;);
        break;

      case Volume.High:
        Console.WriteLine(&quot;Volume is high.&quot;);
        result = true;
        break;
    }

    return result;
  }
}
</code></pre><h2 id="2-difficult-to-convert">2) Difficult to convert</h2>
<p>Taken from the blog article <a href="https://www.planetgeek.ch/2009/07/01/enums-are-evil">Enums Are Evil</a></p>
<blockquote><p>Have you ever tried to convert from enum to int, int to enum, string to enum, string to int value of enum? I’ll show you here with the Volume enum from above, but I didn’t check for the:</p>
</blockquote>
<pre><code>public int EnumToInt(Volume volume)
{
  return (int)volume;
}

public Volume IntToEnum(int intValue)
{
  return (Volume)intValue;
}

public Volume StringToEnum(string stringValue)
{
  return (Volume)Enum.Parse(typeof(Volume), stringValue);
}

public int StringToInt(string stringValue)
{
  var volume = StringToEnum(stringValue);
  return EnumToInt(volume);
}
</code></pre><h3 id="when-can-i-use-enums">When Can I Use Enums?</h3>
<p>You don&#39;t.</p>
<p>For consistency we have a defined convention on how to use &quot;TypeSafe Enums&quot;, and this should always be followed. If you are partaking in a code review and spot the use of enums you should automatically deny the PR and point the author of the PR to this Wiki. Nearly all code can be like for like refactored to replace enums and create a class extending from </p>
<pre><code>Enumeration : IEquatable&lt;Enumeration&gt;
</code></pre><p>Code control flow with switch statements and enums can easily converted from bad enums like this</p>
<pre><code>            switch (messageType)
            {
                case DtoMessageType.Ask:
                    return BuildAskMessage(messageDto);
                case DtoMessageType.Tell:
                    return BuildTellMessage(messageDto, correlationId);
                default:
                    throw new ArgumentException();
            }
</code></pre><p>to if/ else statements like this</p>
<pre><code>            if (messageType == MessageTypes.Ask)
            {
                return BuildAskMessage(messageDto);
            }

            if (messageType == MessageTypes.Tell)
            {
                return BuildTellMessage(messageDto, correlationId);   
            }
</code></pre><h3 id="im-not-convinced">I&#39;m not convinced</h3>
<p>You don&#39;t have to be, everyone has their own preference. But as stated above a convention has been set for this project with more pro&#39;s than cons. Here is some further reading on the subject</p>
<blockquote><p>WARNING As a rule of thumb, enums are code smells and should be refactored to polymorphic classes. [8] Seemann, Mark, Dependency Injection in .Net, 2011, p. 342</p>
<ul>
<li><a href="http://sd.blackball.lv/library/Dependency_Injection_in_.NET_(2011).pdf">http://sd.blackball.lv/library/Dependency_Injection_in_.NET_(2011).pdf</a></li>
</ul>
<p>[8] Martin Fowler et al., Refactoring: Improving the Design of Existing Code (New York: Addison-Wesley, 1999), 82.</p>
<ul>
<li><a href="https://www.csie.ntu.edu.tw/~r95004/Refactoring_improving_the_design_of_existing_code.pdf">https://www.csie.ntu.edu.tw/~r95004/Refactoring_improving_the_design_of_existing_code.pdf</a></li>
</ul>
</blockquote>
<ul>
<li><a href="https://codeblog.jonskeet.uk/2006/01/05/classenum/">https://codeblog.jonskeet.uk/2006/01/05/classenum/</a></li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/catalyst-network/catalyst.node/blob/merge/Why-we-don't-use-Enums.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <span>Copyright © 2019 <a href='https://catalystnet.org'>Catalyst Network</a>
            
          </span></div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
